#!/bin/sh

MAKEDEPS="make"
DEPS="acl sh"

PKG_VER=0.3.2
SOURCE=https://ftp.barfooze.de/pub/sabotage/tarballs/gettext-tiny-$PKG_VER.tar.xz
DESC="Lightweight replacement for tools used in the GNU gettext suite"

ADDITIONAL="
    https://raw.githubusercontent.com/dslm4515/Musl-LFS/master/patches/gettext-tiny-adiele/line-length.patch
    https://raw.githubusercontent.com/dslm4515/Musl-LFS/master/patches/gettext-tiny-adiele/respect-cflags.patch
    https://raw.githubusercontent.com/dslm4515/Musl-LFS/master/patches/gettext-tiny-adiele/stop-doing-macro-crap.patch
"

prepare () {
    for p in *.patch;  do
        patch -Np1 -i $p || true
    done
}

build () {
    LIBINTL=MUSL prefix=/usr make 
}

package () {
    make LIBINTL=MUSL prefix=/usr DESTDIR=$PKG_DEST install 
}
